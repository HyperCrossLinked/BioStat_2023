---
title: "R Notebook"
output: html_notebook
---
## R Markdown
This is an [R Markdown](http://rmarkdown.rstudio.com) Notebook. When you execute code within the notebook, the results appear beneath the code. 

Try executing this chunk by clicking the *Run* button within the chunk or by placing your cursor inside it and pressing *Ctrl+Shift+Enter*. 


## Первый чанк
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(flextable)
library(DescTools)
```

```{r}
plot(cars)
```

Add a new chunk by clicking the *Insert Chunk* button on the toolbar or by pressing *Ctrl+Alt+I*.

When you save the notebook, an HTML file containing the code and output will be saved alongside it (click the *Preview* button or press *Ctrl+Shift+K* to preview the HTML file).

The preview shows you a rendered HTML copy of the contents of the editor. Consequently, unlike *Knit*, *Preview* does not run any R code chunks. Instead, the output of the chunk when it was last run in the editor is displayed.


## Мелкие задачи на описательную статистику
Поиск среднего арифмитического
```{r}
mean(c(1, -1, 5, -12, -12, 3, 8, -10, 0))
mean(c(-2, 16, -3, 16, -9, 7, 31), na.rm = T)
```

Поиск медианы
```{r}
median(c(30, 87, 55, -71, 93, 50, 34, -51, 13, 96, -62, 53, -85), na.rm = T)
```

Задача с курса
```{r}
median(c(1, 9, NA, 88, 2, NA, 42, NA, 4, 68, NA), na.rm = T)
median(c(19, 89, 78, 38, 8, 17, 25, 60, 8, 43, 29, 6, 62, 41, 69, 97, 61, 83, 25, 24), na.rm = T)
median(c(-15, 71, 77, 36, 66, -21, -48, -8), na.rm = T)
median(c(-91, -33, 13, 34, 34, 75, -80, -35, -90, -72, 70, 67, -100, -94, -18), na.rm = T)
median(c(-92, -50, 54, 55, 84, 52, -55, -23, 36, -11, 22, 11, -7), na.rm = T)

```

Ещё зада с курса
```{r}
a <- c(90.48, 31.16, 44.4, 21.94, 84.37, 53.15, 81.15, 47.86, 63.23, 46.75, 102.73) 
min(a, na.rm=T)
max(a, na.rm=T)

```

Задача на квантили
```{r}
quantile(c(80.94, 44.46, 46.33, 65.1, 66.42, 104.43, 53.15, 48.41, 12.88, 51.1, 43.03, 40.3, 33.71, 55.1, 22.17), na.rm=T)

quantile(c(63.92, 35.85, 26.9, 48.92, 43.1, 66.94, 47.06, 56.54, 29.1, 58.88), na.rm=T)
```

Задача на парметры распределения
```{r}
v <- c(76.22, 65, 19.69, 29.84, 37.18, 70.93, 64.78, 61.66, 49.03, 51.56)
var(v)
sd(v)
```

Задача на IQR
```{r}
v <- c(63.92, 35.85, 26.9, 48.92, 43.1, 66.94, 47.06, 56.54, 29.1, 58.88)
IQR(v, na.rm = FALSE, type = 7)
```

Задача на SE
```{r}
v <- c(76.22, 65, 19.69, 29.84, 37.18, 70.93, 64.78, 61.66, 49.03, 51.56)
sd(v)/sqrt(length(v))
```

##Задачи с датасетом
```{r}
data <- read_delim("example_blood.tsv", delim = NULL, quote = "\"", na = c("", "NA"), skip = 0, n_max = Inf, col_names = TRUE)

psych::describe(numeric_data)

```

Обращение к переменным tibble
```{r}
data <- as_tibble(data)
# data$'Группа крови'
# data[["Группа крови"]]

#data %>% select(function(x) sd(x, na.rm = TRUE) > 1)

# data %>% select(where(is.numeric) & where(function(x) sd(x, na.rm = TRUE) > 1))

data %>% select(`Группа`, function(x) !is.factor(x))

#data %>% select(Группа крови, `Возраст`, function(x) anyNA(x))

data %>% select(`Группа крови`, `Возраст`, function(x) anyNA(x))

data %>% select(function(x) any(str_detect(x, "Жен")))

data %>% select(`Группа`, (function(x) is.factor(x)) | where(function(x) is.numeric(x)))

data %>% select(`Пол`, `Группа`, `Базофилы_E1`)


```

Склеивание таблицы по столбцам
```{r}
data_1 <- tibble(var_1 = 1:8) %>% mutate(id = row_number())
data_1
data_2 <- tibble(var_2 = rnorm(10)) %>% mutate('Subject ID' = row_number())
data_2

data_1 %>% right_join(data_2, by = c('id' = 'Subject ID'))
```

Группировка данных
```{r}
data %>% group_by("Группа") %>% ungroup()
```

Сплит данных (Почему используют косые ковычки?)
```{r}
data %>% split(~ `Группа`)
```


